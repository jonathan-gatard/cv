---
const { lang = 'fr' } = Astro.props;
import { experiences } from '../data/experience';

const currentExperiences = experiences[lang] || experiences.fr;
---

<section id="experience" class="py-8 bg-gray-900 text-white">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-10 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
      {lang === 'fr' ? 'Mon Parcours' : 'My Journey'}
    </h2>

    <div class="space-y-8">
      {currentExperiences.map((exp, index) => (
        <div class="relative pl-8 md:pl-0">
          <!-- Timeline Line -->
          <div class="hidden md:block absolute left-1/2 top-0 bottom-0 w-0.5 bg-gray-800 transform -translate-x-1/2"></div>
          
          <div class={`md:flex items-center justify-between gap-8 ${index % 2 === 0 ? 'flex-row-reverse' : ''}`}>
            
            <!-- Date Bubble (Center) -->
            <div class="hidden md:flex absolute left-1/2 transform -translate-x-1/2 items-center justify-center w-36 py-1 rounded-full bg-gray-800 border-2 border-gray-700 z-10 text-xs font-mono text-blue-400 whitespace-nowrap">
                {exp.date}
            </div>

            <!-- Content Card -->
            <div class="w-full md:w-5/12">
              <div class="bg-gray-800 p-5 rounded-xl shadow-lg hover:shadow-xl transition-all border border-gray-700 group hover:border-blue-500/50 relative">
                 <!-- Mobile Date -->
                 <span class="md:hidden text-blue-400 text-xs font-mono mb-2 block">{exp.date}</span>
                 
                <h3 class="text-xl font-bold mb-1 group-hover:text-blue-300 transition-colors">{exp.role}</h3>
                <p class="text-gray-400 mb-3 font-medium text-sm">{exp.company}</p>
                <p class="text-gray-300 mb-4 italic text-xs leading-relaxed">{exp.description}</p>
                
                <div class="space-y-3">
                  {exp.details.map((detail) => (
                    <div class="bg-gray-700/50 p-2.5 rounded-lg border-l-2 border-blue-500">
                      <h4 class="font-bold text-white text-xs mb-0.5">{detail.title}</h4>
                      <p class="text-[11px] text-gray-300 leading-relaxed">{detail.content}</p>
                    </div>
                  ))}
                </div>

                <div class="flex flex-wrap gap-1.5 mt-4">
                  {exp.tags.map((tag) => (
                    <span class="px-2 py-0.5 bg-gray-900 text-gray-300 text-[10px] rounded-md border border-gray-700">
                      #{tag}
                    </span>
                  ))}
                </div>
              </div>
            </div>

            <!-- Empty Space for Timeline balance -->
            <div class="w-full md:w-5/12"></div>
            
          </div>
        </div>
      ))}
    </div>

    <div class="mt-20">
        <h2 class="text-3xl font-bold text-center mb-10 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
          Formation
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
            <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 hover:border-blue-500/50 transition-all flex flex-col h-full">
                <div class="text-blue-400 font-mono text-sm mb-2">2022</div>
                <h3 class="text-lg font-bold text-white mb-1">TU Graz</h3>
                <p class="text-gray-400 text-sm italic mb-2">{lang === 'fr' ? 'Autodidacte' : 'Self-taught'}</p>
                <p class="text-gray-500 text-xs mt-auto">Network Security & Real Time OS</p>
            </div>
             <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 hover:border-blue-500/50 transition-all flex flex-col h-full">
                <div class="text-blue-400 font-mono text-sm mb-2">2019</div>
                <h3 class="text-lg font-bold text-white mb-1">ISAE-ENSMA</h3>
                <p class="text-gray-400 text-sm">{lang === 'fr' ? 'Approfondissement Matériaux' : 'Materials Science Deep Dive'}</p>
            </div>
            <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 hover:border-blue-500/50 transition-all flex flex-col h-full">
                <div class="text-blue-400 font-mono text-sm mb-2">2018</div>
                <h3 class="text-lg font-bold text-white mb-1">ISAE-Supaero</h3>
                <p class="text-gray-400 text-sm">{lang === 'fr' ? 'Formation Spécialisée' : 'Specialized Training'}</p>
            </div>
             <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 hover:border-blue-500/50 transition-all flex flex-col h-full">
                <div class="text-blue-400 font-mono text-sm mb-2">2017</div>
                <h3 class="text-lg font-bold text-white mb-1">CNAM Poitiers</h3>
                <p class="text-gray-400 text-sm">{lang === 'fr' ? 'Parcours Ingénieur' : 'Engineering Degree'}</p>
            </div>
        </div>
    </div>

  </div>
</section>
