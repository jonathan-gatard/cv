---
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Infrastructure R√©seau" description="Architecture r√©seau avanc√©e : OpenWrt, VPN, reverse proxy, vid√©osurveillance Frigate.">
  <div class="max-w-4xl mx-auto px-4 py-12 text-gray-300">
    <a href="/passions" class="inline-flex items-center text-blue-400 hover:text-blue-300 mb-8 transition-colors">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
      </svg>
      Retour aux passions
    </a>

    <h1 class="text-4xl font-bold text-white mb-6">Infrastructure R√©seau</h1>
    <p class="text-xl text-gray-400 mb-12">Ma√Ætrise compl√®te du r√©seau domestique, de la couche physique jusqu'aux services.</p>

    <div class="space-y-16">

      <!-- Routeur -->
      <section>
        <h2 class="text-2xl font-semibold text-white mb-4 border-l-4 border-teal-500 pl-4">Routeur OpenWrt</h2>
        <p class="mb-6">
          Remplacement du routeur FAI par un routeur flash√© <strong>OpenWrt</strong> pour un contr√¥le total du r√©seau.
          Configuration avanc√©e : VLAN, QoS, politique de routage, et gestion fine du pare-feu.
        </p>
        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
          <h3 class="font-bold text-white mb-3">Fonctionnalit√©s cl√©s</h3>
          <ul class="list-disc list-inside space-y-2 text-sm text-gray-300">
            <li><strong>AdGuard Home</strong> ‚Äî DNS sinkhole pour bloquer publicit√©s et trackers sur tout le r√©seau</li>
            <li><strong>VPN (OpenVPN)</strong> ‚Äî Tunnel s√©curis√© pour l'acc√®s distant et la protection du trafic</li>
            <li><strong>Policy Based Routing</strong> ‚Äî Certains services contournent le VPN (reverse proxy, streaming)</li>
            <li><strong>VLAN</strong> ‚Äî Isolation des appareils IoT du r√©seau principal</li>
          </ul>
        </div>
      </section>

      <!-- Reverse Proxy -->
      <section>
        <h2 class="text-2xl font-semibold text-white mb-4 border-l-4 border-teal-500 pl-4">Reverse Proxy & Acc√®s Distant</h2>
        <p class="mb-4">
          Utilisation de <strong>Nginx Proxy Manager</strong> pour exposer certains services (Home Assistant, Grafana) 
          de mani√®re s√©curis√©e via HTTPS avec certificats Let's Encrypt.
        </p>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
            <h3 class="font-bold text-white mb-2">üîí S√©curit√©</h3>
            <ul class="text-sm space-y-1 text-gray-400">
              <li>‚Ä¢ Certificats SSL automatiques</li>
              <li>‚Ä¢ Fail2Ban (protection brute-force SSH)</li>
              <li>‚Ä¢ Firewall OpenWrt avanc√©</li>
            </ul>
          </div>
          <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
            <h3 class="font-bold text-white mb-2">üì° Services expos√©s</h3>
            <ul class="text-sm space-y-1 text-gray-400">
              <li>‚Ä¢ Home Assistant (domotique)</li>
              <li>‚Ä¢ Grafana (monitoring)</li>
              <li>‚Ä¢ Portainer (gestion Docker)</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Vid√©osurveillance -->
      <section>
        <h2 class="text-2xl font-semibold text-white mb-4 border-l-4 border-teal-500 pl-4">Vid√©osurveillance (Frigate)</h2>
        <p class="mb-4">
          Mise en place de <strong>Frigate</strong> pour la d√©tection de personnes en temps r√©el via des cam√©ras IP.
          Int√©gration native avec Home Assistant pour les alertes et l'enregistrement.
        </p>
        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
          <ul class="list-disc list-inside space-y-2 text-sm text-gray-300">
            <li>Analyse du trafic r√©seau des cam√©ras (protocoles RTSP, ONVIF)</li>
            <li>D√©tection IA de personnes avec alertes push</li>
            <li>Enregistrement continu avec r√©tention configurable</li>
            <li>Bascule automatique jour/nuit sur les flux vid√©o</li>
          </ul>
        </div>
      </section>

      <!-- Sch√©ma r√©seau -->
      <section>
        <h2 class="text-2xl font-semibold text-white mb-4 border-l-4 border-teal-500 pl-4">Architecture Globale</h2>
        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700 text-center">
          <p class="text-sm text-gray-500 italic mb-4">Sch√©ma r√©seau √† venir ‚Äî en attendant les photos üì∏</p>
          <div class="bg-black/30 p-4 rounded font-mono text-xs text-teal-200 text-left">
            Internet ‚Üî Box FAI (bridge) ‚Üî OpenWrt Router<br/>
            &nbsp;&nbsp;‚îú‚îÄ‚îÄ VLAN1: LAN Principal (PC, NAS, NUC)<br/>
            &nbsp;&nbsp;‚îú‚îÄ‚îÄ VLAN2: IoT (ZigBee, cam√©ras, ESP32)<br/>
            &nbsp;&nbsp;‚îú‚îÄ‚îÄ VLAN3: Invit√©s<br/>
            &nbsp;&nbsp;‚îî‚îÄ‚îÄ VPN Tunnel ‚Üí Acc√®s distant s√©curis√©
          </div>
        </div>
      </section>

    </div>
  </div>
</Layout>
