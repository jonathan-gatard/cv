---
import { siteConfig } from '../data/config';
import { jobs } from '../data/jobs';
import { education } from '../data/education';

const personalInfo = siteConfig.personalInfo;

// Keep print-specific skills here for layout control, or move to config if requested.
const skills = {
  mainframe: ["z/OS", "USS", "JCL", "CICS", "DB2", "Zowe"],
  open: ["Python", "Docker", "Ansible", "Linux", "Git", "REST API"],
  methodology: ["Agile/Scrum", "DevOps", "ITIL 4", "Lean/6œÉ"]
};

const languages = [
  { name: "Fran√ßais", level: "Natif", pct: 100 },
  { name: "Anglais", level: "Courant (C1)", pct: 85 },
  { name: "Espagnol", level: "Scolaire", pct: 35 },
  { name: "Slovaque", level: "Notions", pct: 15 },
];

const interests = [
  { icon: "üè†", text: "Domotique compl√®te (Home Assistant, Docker, ZigBee, 25+ conteneurs)" },
  { icon: "üåê", text: "Infrastructure R√©seau (OpenWrt, VPN, Reverse Proxy, Frigate)" },
  { icon: "‚úàÔ∏è", text: "A√©romod√©lisme (construction, pilotage, firmware OpenTX)" },
  { icon: "üîß", text: "M√©canique auto (turbo, swap moteur, diagnostic ISTA)" },
  { icon: "üñ®Ô∏è", text: "Impression 3D & Laser (Prusa DIY, Voron CoreXY, Klipper)" },
  { icon: "üåø", text: "Terrariophilie high-tech & Potager intelligent" },
];
---

<html lang="fr">
<head>
    <meta charset="utf-8" />
    <title>CV ‚Äî Jonathan Gatard</title>
    <meta name="viewport" content="width=device-width" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        @page {
            size: A4;
            margin: 0;
        }
        @media print {
            html, body { 
                width: 210mm;
                height: 297mm;
                -webkit-print-color-adjust: exact; 
                print-color-adjust: exact;
            }
            .no-print { display: none !important; }
            .page { box-shadow: none !important; }
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: #0a0a0f;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem 0;
        }
        @media print { body { padding: 0; background: white; } }
        
        .page {
            width: 210mm;
            height: 297mm;
            background: white;
            display: flex;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            position: relative;
        }

        /* ‚îÄ‚îÄ Left sidebar ‚îÄ‚îÄ */
        .sidebar {
            width: 72mm;
            background: #111827;
            color: white;
            padding: 7mm 5mm 5mm;
            display: flex;
            flex-direction: column;
            gap: 4mm;
            flex-shrink: 0;
        }
        
        .photo-wrapper {
            display: flex;
            justify-content: center;
            margin-bottom: 1mm;
        }
        .photo {
            width: 28mm;
            height: 28mm;
            border-radius: 50%;
            border: 3px solid #3b82f6;
            object-fit: cover;
            box-shadow: 0 0 0 3px rgba(59,130,246,0.2);
        }

        .sidebar-name {
            text-align: center;
            font-size: 14pt;
            font-weight: 800;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            line-height: 1.2;
        }
        .sidebar-title {
            text-align: center;
            font-size: 7pt;
            color: #60a5fa;
            font-weight: 600;
            margin-bottom: 1mm;
        }
        
        .section-title {
            font-size: 6.5pt;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #6b7280;
            border-bottom: 1px solid #1f2937;
            padding-bottom: 1.5mm;
            margin-bottom: 2mm;
        }

        .contact-list {
            list-style: none;
            font-size: 7pt;
            color: #d1d5db;
        }
        .contact-list li {
            display: flex;
            align-items: center;
            gap: 2mm;
            margin-bottom: 1.5mm;
        }
        .contact-list .icon {
            width: 4mm;
            text-align: center;
            font-size: 8pt;
        }

        .skill-group h3 {
            font-size: 7.5pt;
            font-weight: 700;
            color: white;
            margin-bottom: 1.5mm;
        }
        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 1mm;
            margin-bottom: 2.5mm;
        }
        .skill-tag {
            font-size: 6.5pt;
            padding: 0.8mm 2.5mm;
            background: #1f2937;
            border: 0.5px solid #374151;
            border-radius: 2mm;
            color: #d1d5db;
        }

        .lang-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 7pt;
            color: #d1d5db;
            margin-bottom: 1.5mm;
        }
        .lang-bar-bg {
            width: 18mm;
            height: 2mm;
            background: #1f2937;
            border-radius: 1mm;
            overflow: hidden;
        }
        .lang-bar-fill {
            height: 100%;
            border-radius: 1mm;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        }

        /* ‚îÄ‚îÄ Right main content ‚îÄ‚îÄ */
        .main {
            flex: 1;
            padding: 6mm 6mm 5mm 6mm;
            display: flex;
            flex-direction: column;
            gap: 3.5mm;
            overflow: hidden;
        }

        .summary-box {
            background: #eff6ff;
            border-left: 3px solid #3b82f6;
            padding: 3mm 4mm;
            font-size: 7.5pt;
            font-style: italic;
            color: #374151;
            line-height: 1.5;
            border-radius: 0 2mm 2mm 0;
        }

        .main-section-title {
            font-size: 9pt;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #111827;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 1.5mm;
            display: flex;
            align-items: center;
            gap: 2mm;
        }
        .main-section-title .accent {
            width: 3mm;
            height: 3mm;
            background: #3b82f6;
            border-radius: 0.5mm;
            flex-shrink: 0;
        }

        /* Experience cards */
        .exp-card { margin-bottom: 2.5mm; }
        .exp-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.5mm;
        }
        .exp-role {
            font-size: 8.5pt;
            font-weight: 700;
            color: #111827;
        }
        .exp-date {
            font-size: 6.5pt;
            font-family: 'Courier New', monospace;
            color: #6b7280;
            background: #f3f4f6;
            padding: 0.5mm 2mm;
            border-radius: 1mm;
            border: 0.5px solid #e5e7eb;
            white-space: nowrap;
        }
        .exp-company {
            font-size: 7.5pt;
            color: #3b82f6;
            font-weight: 600;
            margin-bottom: 1mm;
        }
        .exp-details {
            list-style: none;
            font-size: 7pt;
            color: #374151;
            line-height: 1.6;
        }
        .exp-details li {
            padding-left: 3mm;
            position: relative;
        }
        .exp-details li::before {
            content: '‚Ä∫';
            position: absolute;
            left: 0;
            color: #3b82f6;
            font-weight: 700;
        }

        /* Bottom row */
        .bottom-row {
            display: flex;
            gap: 5mm;
            margin-top: auto;
        }
        .bottom-col { flex: 1; }

        .edu-card {
            margin-bottom: 2mm;
        }
        .edu-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
        }
        .edu-degree {
            font-size: 7.5pt;
            font-weight: 700;
            color: #111827;
        }
        .edu-date {
            font-size: 6pt;
            color: #6b7280;
            white-space: nowrap;
        }
        .edu-school {
            font-size: 6.5pt;
            color: #3b82f6;
            font-weight: 500;
        }

        .interest-row {
            display: flex;
            align-items: flex-start;
            gap: 2mm;
            margin-bottom: 1.5mm;
            font-size: 6.5pt;
            color: #374151;
            line-height: 1.4;
        }
        .interest-icon {
            font-size: 8pt;
            flex-shrink: 0;
            width: 4mm;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Print Controls -->
    <div class="no-print" style="position:fixed; top:1rem; right:1rem; display:flex; gap:0.5rem; z-index:100;">
        <button onclick="window.print()" style="background:#3b82f6; color:white; border:none; padding:0.6rem 1.2rem; border-radius:0.5rem; font-weight:700; cursor:pointer; font-size:0.85rem;">
            üñ®Ô∏è Imprimer / PDF
        </button>
        <a href="/" style="background:#374151; color:white; border:none; padding:0.6rem 1.2rem; border-radius:0.5rem; font-weight:700; cursor:pointer; text-decoration:none; font-size:0.85rem;">
            ‚¨ÖÔ∏è Retour
        </a>
    </div>

    <!-- A4 Page -->
    <div class="page">
        
        <!-- ‚ïê‚ïê‚ïê LEFT SIDEBAR ‚ïê‚ïê‚ïê -->
        <div class="sidebar">
            
            <div class="photo-wrapper">
                <img src="/images/profil.jpg" alt="Jonathan Gatard" class="photo" />
            </div>

            <div>
                <div class="sidebar-name">{personalInfo.name}</div>
                <div class="sidebar-title">{personalInfo.title}</div>
            </div>

            <!-- Contact -->
            <div>
                <div class="section-title">Contact</div>
                <ul class="contact-list">
                    <li><span class="icon">üìß</span> <span>{personalInfo.email}</span></li>
                    <li><span class="icon">üì±</span> <span>{personalInfo.phone}</span></li>
                    <li><span class="icon">üåê</span> <span>{personalInfo.website}</span></li>
                    <li><span class="icon">üíº</span> <span>{personalInfo.linkedin}</span></li>
                    <li><span class="icon">üöó</span> <span style="color:#93c5fd">{personalInfo.misc}</span></li>
                </ul>
            </div>

            <!-- Comp√©tences -->
            <div>
                <div class="section-title">Comp√©tences</div>
                <div class="skill-group">
                    <h3>Mainframe</h3>
                    <div class="skill-tags">
                        {skills.mainframe.map(s => <span class="skill-tag">{s}</span>)}
                    </div>
                </div>
                <div class="skill-group">
                    <h3>Open & DevOps</h3>
                    <div class="skill-tags">
                        {skills.open.map(s => <span class="skill-tag">{s}</span>)}
                    </div>
                </div>
                <div class="skill-group">
                    <h3>M√©thodologie</h3>
                    <div class="skill-tags">
                        {skills.methodology.map(s => <span class="skill-tag">{s}</span>)}
                    </div>
                </div>
            </div>

            <!-- Langues -->
            <div style="margin-top:auto;">
                <div class="section-title">Langues</div>
                {languages.map(l => (
                    <div class="lang-row">
                        <span>{l.name}</span>
                        <div class="lang-bar-bg">
                            <div class="lang-bar-fill" style={`width:${l.pct}%`}></div>
                        </div>
                    </div>
                ))}
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê RIGHT MAIN ‚ïê‚ïê‚ïê -->
        <div class="main">
            
            <!-- Summary -->
            <div class="summary-box">
                Double comp√©tence alliant la rigueur du <strong>Mainframe z/OS</strong> √† l'agilit√© <strong>DevOps</strong>.
                Je con√ßois des ponts entre les syst√®mes historiques (Syst√®me Z) et les architectures Open.
            </div>

            <!-- Exp√©riences -->
            <div>
                <div class="main-section-title"><span class="accent"></span> Exp√©riences Professionnelles</div>
            </div>
            
            {jobs.map(exp => (
                <div class="exp-card">
                    <div class="exp-header">
                        <span class="exp-role">{exp.role}</span>
                        <span class="exp-date">{exp.datePrint || exp.date}</span>
                    </div>
                    <div class="exp-company">{exp.companyPrint || exp.company}</div>
                    <ul class="exp-details">
                        {(exp.printDetails || []).map(d => <li>{d}</li>)}
                    </ul>
                </div>
            ))}

            <!-- Bottom: Formation + Centres d'int√©r√™t -->
            <div class="bottom-row">
                <div class="bottom-col">
                    <div class="main-section-title" style="font-size:8pt;"><span class="accent"></span> Formation</div>
                    <div style="margin-top:2mm;">
                        {education.filter(e => e.schoolPrint).map(edu => (
                            <div class="edu-card">
                                <div class="edu-header">
                                    <span class="edu-degree">{edu.degreePrint || edu.role}</span>
                                    <span class="edu-date">{edu.date}</span>
                                </div>
                                <div class="edu-school">{edu.schoolPrint || edu.company}</div>
                            </div>
                        ))}
                    </div>
                </div>
                <div class="bottom-col">
                    <div class="main-section-title" style="font-size:8pt;"><span class="accent"></span> Projets & Passions</div>
                    <div style="margin-top:2mm;">
                        {interests.map(i => (
                            <div class="interest-row">
                                <span class="interest-icon">{i.icon}</span>
                                <span>{i.text}</span>
                            </div>
                        ))}
                    </div>
                </div>
            </div>

        </div>
    </div>
</body>
</html>
